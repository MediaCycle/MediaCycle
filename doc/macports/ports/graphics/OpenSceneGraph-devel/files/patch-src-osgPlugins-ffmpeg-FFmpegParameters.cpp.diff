--- src/osgPlugins/ffmpeg/FFmpegParameters.cpp.orig	2012-03-21 18:36:20.000000000 +0100
+++ src/osgPlugins/ffmpeg/FFmpegParameters.cpp	2012-11-24 14:37:19.000000000 +0100
@@ -8,7 +8,7 @@
 #if LIBAVCODEC_VERSION_MAJOR >= 53
 extern "C"
 {
-    #include <parseutils.h>
+    #include <libavutil/parseutils.h>
 }
 #define av_parse_video_frame_size av_parse_video_size
 #define av_parse_video_frame_rate av_parse_video_rate
@@ -19,7 +19,7 @@
 
     extern "C"
     {
-        #include <pixdesc.h>
+        #include <libavutil/pixdesc.h>
     }
 
     inline PixelFormat osg_av_get_pix_fmt(const char *name) { return av_get_pix_fmt(name); }
@@ -28,11 +28,10 @@
     inline PixelFormat osg_av_get_pix_fmt(const char *name) { return avcodec_get_pix_fmt(name); }
 #endif
 
+#if LIBAVFORMAT_BUILD < (54<<16 | 29<<8 | 0)
 
 namespace osgFFmpeg {
 
-
-
 FFmpegParameters::FFmpegParameters() :
     m_format(0)
 {
@@ -99,3 +98,4 @@
 
 
 } // namespace osgFFmpeg
+#endif
