SET(TEST_NAME "image-cvgabor-test")
IF(SUPPORT_IMAGE AND USE_RARE)
	FILE(GLOB SRC *.cpp *.c)
	FILE(GLOB HDR *.hpp *.h)

        INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/media/image-core)
        INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/media/image-features)
        INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/3rdparty/cvBlobsLib)
        INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/3rdparty/cvgabor)
        INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/3rdparty/gnuplot_i)

	ADD_EXECUTABLE(${TEST_NAME} ${SRC} ${HDR})
	#ADD_DEPENDENCIES(${TEST_NAME} mediacycle mc_image)
	#TARGET_LINK_LIBRARIES(${TEST_NAME} mediacycle mediacycle-image-features)
	TARGET_LINK_LIBRARIES(${TEST_NAME} ${OpenCV_LIBRARIES})
	TARGET_LINK_LIBRARIES(${TEST_NAME} cvBlobsLib cvgabor)
	TARGET_LINK_LIBRARIES(${TEST_NAME} ${GSL_LIBRARIES})

	SET_TARGET_PROPERTIES("${TEST_NAME}" PROPERTIES FOLDER "${FOLDERNAME}")
	MESSAGE("[X] ${TEST_NAME}")
ELSE()
	MESSAGE("[ ] ${TEST_NAME}")
ENDIF()
