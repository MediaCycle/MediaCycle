SET(TARGET_NAME "MediaCycleCLI")
IF (BUILD_CLIS)

	FILE(GLOB SRC *.cpp *.c)
	FILE(GLOB HDR *.hpp *.h)

        ADD_EXECUTABLE(${TARGET_NAME} ${SRC} ${HDR})

	FILE(GLOB MEDIA_DIRS ${CMAKE_SOURCE_DIR}/media/*)
	FOREACH(MEDIA_DIR ${MEDIA_DIRS})
   		IF(IS_DIRECTORY ${MEDIA_DIR})
        		INCLUDE_DIRECTORIES(${MEDIA_DIR})
    		ENDIF()
	ENDFOREACH()

	FILE(GLOB PLUGIN_DIRS ${CMAKE_SOURCE_DIR}/plugins/*)
	FOREACH(PLUGIN_DIR ${PLUGIN_DIRS})
   		IF(IS_DIRECTORY ${PLUGIN_DIR})
        		INCLUDE_DIRECTORIES(${PLUGIN_DIR})
                        GET_FILENAME_COMPONENT(PLUGIN ${PLUGIN_DIR} NAME)
                        ADD_DEPENDENCIES(${TARGET_NAME} ${PLUGIN_PREFIX}${PLUGIN})
    		ENDIF()
	ENDFOREACH()
	
        ADD_DEPENDENCIES(${TARGET_NAME} mediacycle)
        TARGET_LINK_LIBRARIES(${TARGET_NAME} mediacycle)

	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES FOLDER "${FOLDERNAME}")
	MESSAGE("[X] ${TARGET_NAME}")
ELSE()
	MESSAGE("[ ] ${TARGET_NAME}")
ENDIF()



