FILE(GLOB SRC *.cpp *.c ./blobs/*.cpp ./gabor/*.cpp)
FILE(GLOB HDR *.hpp *.h ./blobs/*.h ./gabor/*.h)

SET(PLUGIN_NAME "image")

ADD_LIBRARY(${PLUGIN_NAME} SHARED ${SRC} ${HDR})
ADD_DEPENDENCIES(${PLUGIN_NAME} mediacycle armadillo)

SET_TARGET_PROPERTIES(${PLUGIN_NAME} PROPERTIES PREFIX "mc_")
#SET_TARGET_PROPERTIES(${PLUGIN_NAME} PROPERTIES SUFFIX ".mcp")
TARGET_LINK_LIBRARIES(${PLUGIN_NAME} mediacycle)

#OpenCV
IF ( USE_OPENCV )
    IF ( APPLE )
        TARGET_LINK_LIBRARIES(${PLUGIN_NAME} ${OPENCV_CV_LIBRARY} ${OPENCV_CXCORE_LIBRARY} ${OPENCV_HIGHGUI_LIBRARY})
    ELSE ( APPLE )
        TARGET_LINK_LIBRARIES(${PLUGIN_NAME} cv cxcore highgui)
    ENDIF ( APPLE )
ENDIF ( USE_OPENCV )

INSTALL(TARGETS ${PLUGIN_NAME} LIBRARY DESTINATION lib/${PROJECT_NAME})
