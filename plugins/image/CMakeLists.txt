SET(PLUGIN_NAME "image")
SET(TARGET_NAME "${PLUGIN_PREFIX}${PLUGIN_NAME}")
IF(SUPPORT_IMAGE OR SUPPORT_VIDEO)

	IF(NOT USE_GNUPLOT_I)
		MESSAGE(FATAL_ERROR "The mc_image plugin currently requires gnuplot_i. Either install gnuplot_i; or disable plugins or image support; or remove the gnuplot_i dependency on this plugin.")
	ENDIF()

	FILE(GLOB SRC *.cpp *.c ./blobs/*.cpp ./gabor/*.cpp)
	FILE(GLOB HDR *.hpp *.h ./blobs/*.h ./gabor/*.h)

    INCLUDE_DIRECTORIES(. ${CMAKE_SOURCE_DIR}/plugins/image/blobs ${CMAKE_SOURCE_DIR}/plugins/image/gabor)

	ADD_LIBRARY(${TARGET_NAME} SHARED ${SRC} ${HDR})
	ADD_DEPENDENCIES(${TARGET_NAME} mediacycle)

	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES PREFIX ${PLUGIN_PREFIX})
	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES OUTPUT_NAME ${PLUGIN_NAME})

	TARGET_LINK_LIBRARIES(${TARGET_NAME} mediacycle)

	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OpenCV_LIBRARIES})
	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${FFTW3_LIBRARY})

	#INSTALL(TARGETS ${TARGET_NAME} LIBRARY DESTINATION lib/${PROJECT_NAME})
	MESSAGE("[X] ${TARGET_NAME}")
ELSE()
	MESSAGE("[ ] ${TARGET_NAME}")
ENDIF()
