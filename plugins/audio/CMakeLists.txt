SET(PLUGIN_NAME "audio")
SET(TARGET_NAME "${PLUGIN_PREFIX}${PLUGIN_NAME}")
IF(SUPPORT_AUDIO)

	#FILE(GLOB SRC *.cpp *.c)
	#FILE(GLOB HDR *.hpp *.h)
	SET(SRC "ACAudioAcidPlugin.cpp;factory.cpp")
	SET(HDR "ACAudioAcidPlugin.h")

	IF(USE_AUDIOFEAT)
		SET(SRC "${SRC};ACAudioFeaturesPlugin.cpp;ACAudioHaitsmaFingerprintPlugin.cpp")
		SET(HDR "${HDR};ACAudioFeaturesPlugin.h;ACAudioHaitsmaFingerprintPlugin.h")
		IF(USE_AUDIOGARDEN)
			SET(SRC "${SRC};ACAudioGardenFeaturesPlugin.cpp")
			SET(HDR "${HDR};ACAudioGardenFeaturesPlugin.h")
		ENDIF()
	ENDIF()
	IF(OCTAVE_FOUND AND USE_OCTAVE AND USE_MAKAM)
		SET(SRC "${SRC};ACAudioMakamClassifierPlugin.cpp;ACAudioMakamFeaturesPlugin.cpp")
		SET(HDR "${HDR};ACAudioMakamClassifierPlugin.h;ACAudioMakamFeaturesPlugin.h")
	ENDIF()
	IF(USE_YAAFE)
		SET(SRC "${SRC};${CMAKE_SOURCE_DIR}/3rdparty/yaafe/src_cpp/yaafe-io/io/FileUtils.cpp;ACAudioYaafePlugin.cpp")
		SET(HDR "${HDR};${CMAKE_SOURCE_DIR}/3rdparty/yaafe/src_cpp/yaafe-io/io/FileUtils.h;ACAudioYaafePlugin.h")
	ENDIF()

	ADD_LIBRARY(${TARGET_NAME} SHARED ${SRC} ${HDR})

	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES PREFIX ${PLUGIN_PREFIX})
	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES OUTPUT_NAME ${PLUGIN_NAME})
	#SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES SUFFIX ${PLUGIN_SUFFIX})

	IF(USE_AUDIOFEAT)
		ADD_DEPENDENCIES(${TARGET_NAME} audiofeatures)
		TARGET_LINK_LIBRARIES(${TARGET_NAME} audiofeatures)
	ENDIF()
	IF(OCTAVE_FOUND AND USE_OCTAVE)
		ADD_DEPENDENCIES(${TARGET_NAME} octave_embed octave_yin) 
		TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OCTAVE_LIBRARY} octave_embed)
	ENDIF()
	IF(USE_YAAFE)
		ADD_DEPENDENCIES(${TARGET_NAME} yaafe-core yaafe-io yaafe-components)
                TARGET_LINK_LIBRARIES(${TARGET_NAME} yaafe-core yaafe-io yaafe-components ${ARGTABLE2_LIBRARY})
	ENDIF()

	ADD_DEPENDENCIES(${TARGET_NAME} mediacycle armadillo-utils cwaves)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} mediacycle armadillo-utils cwaves ${ARMADILLO_LIBRARIES})

	#CF we need to be able to display images (library cover) for any media type
	#IF(SUPPORT_3DMODEL OR SUPPORT_IMAGE OR SUPPORT_VIDEO)
		TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OPENSCENEGRAPH_CORE_LIBRARIES} ${OPENGL_LIBRARIES})
	#ENDIF()
	#INSTALL(TARGETS ${TARGET_NAME} LIBRARY DESTINATION lib/${PROJECT_NAME})
	MESSAGE("[X] ${TARGET_NAME}")
ELSE()
	MESSAGE("[ ] ${TARGET_NAME}")
ENDIF()
