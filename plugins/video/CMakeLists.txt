SET(PLUGIN_NAME "video")
SET(TARGET_NAME "${PLUGIN_PREFIX}${PLUGIN_NAME}")

IF(SUPPORT_VIDEO AND ARMADILLO_FOUND)
	FILE(GLOB SRC *.cpp *.c)
	FILE(GLOB HDR *.hpp *.h)

	INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/plugins/image/blobs ${CMAKE_SOURCE_DIR}/plugins/image/gabor)

	ADD_LIBRARY(${TARGET_NAME} SHARED ${SRC} ${HDR})
	ADD_DEPENDENCIES(${TARGET_NAME} mediacycle mc_image armadillo-utils)

	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES PREFIX ${PLUGIN_PREFIX})
	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES OUTPUT_NAME ${PLUGIN_NAME})
	#SET_TARGET_PROPERTIES(${PLUGIN_NAME} PROPERTIES SUFFIX ${PLUGIN_SUFFIX})
	TARGET_LINK_LIBRARIES(${TARGET_NAME} mediacycle)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} mc_image)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} armadillo-utils)
	IF(USE_GNUPLOT_I)
	ADD_DEPENDENCIES(${TARGET_NAME} gnuplot_i)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} gnuplot_i)
	ENDIF()

	IF (STARPU_USE_CPU)
		TARGET_LINK_LIBRARIES(${TARGET_NAME} ${STARPU_LIBRARY})
	ENDIF()	
	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OpenCV_LIBRARIES} )

	#INSTALL(TARGETS ${TARGET_NAME} LIBRARY DESTINATION lib/${PROJECT_NAME})
	MESSAGE("[X] ${TARGET_NAME}")
ELSE()
	MESSAGE("[ ] ${TARGET_NAME}")
ENDIF()
