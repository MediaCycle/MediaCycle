IF ( ARMADILLO_FOUND )
	FILE(GLOB SRC *.cpp *.c)
	FILE(GLOB HDR *.hpp *.h)

	SET(PLUGIN_NAME "video")
	SET(TARGET_NAME "${PLUGIN_PREFIX}${PLUGIN_NAME}")

	ADD_LIBRARY(${TARGET_NAME} SHARED ${SRC} ${HDR})
	ADD_DEPENDENCIES(${TARGET_NAME} mediacycle mc_image armadillo-utils)

	INCLUDE_DIRECTORIES(. ../image/blobs ../image ../image/gabor ../../armadillo)

	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES PREFIX ${PLUGIN_PREFIX})
	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES OUTPUT_NAME ${PLUGIN_NAME})
	#SET_TARGET_PROPERTIES(${PLUGIN_NAME} PROPERTIES SUFFIX ${PLUGIN_SUFFIX})
	TARGET_LINK_LIBRARIES(${TARGET_NAME} mediacycle)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} mc_image)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} armadillo-utils)

	#OpenCV
	#IF ( USE_OPENCV )
	#    IF ( UNIX )
	#        TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OPENCV_CV_LIBRARY} ${OPENCV_CXCORE_LIBRARY} ${OPENCV_HIGHGUI_LIBRARY})
	#    ELSE ( UNIX )
	        TARGET_LINK_LIBRARIES(${TARGET_NAME} cv cxcore highgui)
	#    ENDIF ( UNIX )
	#ENDIF ( USE_OPENCV )

	INSTALL(TARGETS ${TARGET_NAME} LIBRARY DESTINATION lib/${PROJECT_NAME})
ELSE ( ARMADILLO_FOUND )
	MESSAGE ("Not building video plugins: armadillo with BLAS/LAPACK support required.")
ENDIF ( ARMADILLO_FOUND )
