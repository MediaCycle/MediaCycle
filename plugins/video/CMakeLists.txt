FILE(GLOB SRC *.cpp *.c)
FILE(GLOB HDR *.hpp *.h)

SET(PLUGIN_NAME "video")

ADD_LIBRARY(${PLUGIN_NAME} SHARED ${SRC} ${HDR})
ADD_DEPENDENCIES(${PLUGIN_NAME} mediacycle image)

INCLUDE_DIRECTORIES(. ../image/blobs ../image)

SET_TARGET_PROPERTIES(${PLUGIN_NAME} PROPERTIES PREFIX "mc_")
#SET_TARGET_PROPERTIES(${PLUGIN_NAME} PROPERTIES SUFFIX ".mcp")
TARGET_LINK_LIBRARIES(${PLUGIN_NAME} mediacycle)
TARGET_LINK_LIBRARIES(${PLUGIN_NAME} image)

#OpenCV
IF ( USE_OPENCV )
    IF ( APPLE )
        TARGET_LINK_LIBRARIES(${PLUGIN_NAME} ${OPENCV_CV_LIBRARY} ${OPENCV_CXCORE_LIBRARY} ${OPENCV_HIGHGUI_LIBRARY})
    ELSE ( APPLE )
        TARGET_LINK_LIBRARIES(${PLUGIN_NAME} cv cxcore highgui)
    ENDIF ( APPLE )
ENDIF ( USE_OPENCV )

INSTALL(TARGETS ${PLUGIN_NAME} LIBRARY DESTINATION lib/${PROJECT_NAME})
