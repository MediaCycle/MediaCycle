SET(MEDIA_TYPE "audio")
SET(LIBRARY_NAME "mediacycle-audio-engine-stk")
IF(NOT STK_FOUND)
	SET(MC_3RDPARTIES "RtAudio;RtMidi;stk")
ENDIF()
SET(MC_MEDIA_LIBS "${MEDIA_TYPE}-core")
list(APPEND 3RDPARTY_NAMES "libsndfile")
list(APPEND 3RDPARTY_LICENSES "LGPL or GPL")
list(APPEND 3RDPARTY_URLS "http://www.mega-nerd.com/libsndfile")
SET(WITH_QT ON)
IF(SUPPORT_AUDIO AND (NOT APPLE OR (COREAUDIO_FOUND AND COREFOUNDATION_FOUND)) AND SNDFILE_FOUND AND RTAUDIO_FOUND AND RTMIDI_FOUND)
	INCLUDE (${CMAKE_SOURCE_DIR}/cmake/AddMediaCycleMediaLibrary.cmake)
    INCLUDE_DIRECTORIES(${STK_INCLUDE_DIRS})
	#INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/3rdparty/RtError)
	ADD_MC_MEDIA_LIBRARY(${LIBRARY_NAME})
    TARGET_LINK_LIBRARIES(${TARGET_NAME} ${SNDFILE_LIBRARIES})
	IF(STK_FOUND)
    	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${STK_LIBRARIES})
	ENDIF(STK_FOUND)
	IF(RTAUDIO_FOUND)
    	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${RTAUDIO_LIBRARIES})
	ENDIF(RTAUDIO_FOUND)
	IF(RTMIDI_FOUND)
    	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${RTMIDI_LIBRARIES})
	ENDIF(RTMIDI_FOUND)
	
	#IF(APPLE)
	#	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${COREFOUNDATION_LIBRARY} ${COREAUDIO_LIBRARY})
	#ENDIF()
	SET_TARGET_PROPERTIES(${LIBRARY_NAME} PROPERTIES FOLDER "${FOLDERNAME}")
	MESSAGE("[X] ${LIBRARY_NAME}")
ELSE()
	MESSAGE("[ ] ${LIBRARY_NAME}")
ENDIF()
