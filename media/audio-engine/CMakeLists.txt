SET(MEDIA_TYPE "audio")
SET(LIBRARY_NAME "mediacycle-${MEDIA_TYPE}-engine")

IF(SUPPORT_AUDIO AND (USE_OPENAL OR USE_PORTAUDIO))
	FILE(GLOB SRC *.cpp *.c)
	FILE(GLOB HDR *.hpp *.h)
	
	INCLUDE_DIRECTORIES(../${MEDIA_TYPE}-core)

	ADD_LIBRARY(${LIBRARY_NAME} ${SRC} ${HDR})
	ADD_DEPENDENCIES(${LIBRARY_NAME} mediacycle mediacycle-${MEDIA_TYPE}-core)
	TARGET_LINK_LIBRARIES(${LIBRARY_NAME} mediacycle mediacycle-${MEDIA_TYPE}-core)
	IF ( NOT APPLE )
		TARGET_LINK_LIBRARIES(${LIBRARY_NAME} pthread)
		IF ( WIN32 )
			TARGET_LINK_LIBRARIES(${LIBRARY_NAME} ws2_32)
		ENDIF ( WIN32 )
	ELSE ( NOT APPLE )
		TARGET_LINK_LIBRARIES(${LIBRARY_NAME})
	ENDIF ( NOT APPLE )

	IF(USE_OPENAL)
		TARGET_LINK_LIBRARIES(${LIBRARY_NAME} mediacycle ${OPENAL_LIBRARIES})
	ENDIF()
	IF(USE_PORTAUDIO)
		TARGET_LINK_LIBRARIES(${LIBRARY_NAME} mediacycle ${PORTAUDIO_LIBRARIES} pthread)
	ENDIF()
	IF(USE_OPENAL)
		MESSAGE("[X] ${LIBRARY_NAME} (with OpenAL)")
	ELSEIF(USE_PORTAUDIO)
		MESSAGE("[X] ${LIBRARY_NAME} (with PortAudio)")
	ENDIF()
ELSE()
	MESSAGE("[ ] ${LIBRARY_NAME}")
ENDIF()
