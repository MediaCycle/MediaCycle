SET(MEDIA_TYPE "audio")
SET(LIBRARY_NAME "mediacycle-${MEDIA_TYPE}-engine")
IF(USE_OPENAL AND OPENALEXT_FOUND)
SET(MC_3RDPARTIES "openal-soft-reverb")
ENDIF()
SET(MC_MEDIA_LIBS "${MEDIA_TYPE}-core")
IF(SUPPORT_AUDIO AND (USE_OPENAL OR USE_PORTAUDIO) AND SNDFILE_FOUND)
	
        INCLUDE(${CMAKE_SOURCE_DIR}/cmake/AddMediaCycleMediaLibrary.cmake)

        ADD_MC_MEDIA_LIBRARY(${LIBRARY_NAME} ${SRC} ${HDR})

	IF ( NOT APPLE )
                TARGET_LINK_LIBRARIES(${TARGET_NAME} pthread)
		IF ( WIN32 )
                        TARGET_LINK_LIBRARIES(${TARGET_NAME} ws2_32)
		ENDIF ( WIN32 )
	ENDIF ( NOT APPLE )

	IF(USE_OPENAL)
                TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OPENAL_LIBRARIES})
	ENDIF()
	IF(USE_PORTAUDIO)
                TARGET_LINK_LIBRARIES(${TARGET_NAME} ${PORTAUDIO_LIBRARIES} pthread)
	ENDIF()
	IF(USE_OPENAL)
                MESSAGE("[X] ${LIBRARY_NAME} (with OpenAL)")
	ELSEIF(USE_PORTAUDIO)
                MESSAGE("[X] ${LIBRARY_NAME} (with PortAudio)")
	ENDIF()
	SET_TARGET_PROPERTIES(${LIBRARY_NAME} PROPERTIES FOLDER "${FOLDERNAME}")
ELSE()
	MESSAGE("[ ] ${LIBRARY_NAME}")
ENDIF()
