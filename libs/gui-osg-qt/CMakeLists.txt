SET(TARGET_NAME "mediacycle-osg-qt")
IF(USE_OSG AND USE_QT4 AND QWT_FOUND)

	FILE(GLOB ${TARGET_NAME}_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/AC*.cpp)
	FILE(GLOB ${TARGET_NAME}_HDRS ${CMAKE_CURRENT_SOURCE_DIR}/AC*.h)
	FILE(GLOB ${TARGET_NAME}_UIS ${CMAKE_CURRENT_SOURCE_DIR}/AC*.ui)

	# Generates ui_*.h files 
	QT4_WRAP_UI(${TARGET_NAME}_UIS_H ${${TARGET_NAME}_UIS})
	# Generates moc_*.cxx files
	QT4_WRAP_CPP(${TARGET_NAME}_MOC_SRCS ${${TARGET_NAME}_HDRS} OPTIONS "-nw") # for all headers that potentially declare Q_OBJECT, otherwise warnings are suppressed	

	# Don't forget to include output directory, otherwise
	# the UI file won't be wrapped!
	include_directories(${CMAKE_CURRENT_BINARY_DIR})

	ADD_LIBRARY(${TARGET_NAME} ${${TARGET_NAME}_SRCS} ${${TARGET_NAME}_HDRS} ${${TARGET_NAME}_UIS_H} ${${TARGET_NAME}_MOC_SRCS} ${${TARGET_NAME}_RCC_SRCS})
	ADD_DEPENDENCIES(${TARGET_NAME} mediacycle-osg)

	TARGET_LINK_LIBRARIES(${TARGET_NAME} mediacycle-osg)
	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OPENSCENEGRAPH_LIBRARIES})
	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${Boost_SYSTEM_LIBRARY})
	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${QT_LIBRARIES} ${QWT_LIBRARIES})
	IF ( MINGW )#OR APPLE_IOS_DEV OR APPLE_IOS_SIM )
		TARGET_LINK_LIBRARIES(${TARGET_NAME} ${Qt4_PKG_STATIC_LDFLAGS})#${Qt4_PKG_LDFLAGS})
	ENDIF ( MINGW )#OR APPLE_IOS_DEV OR APPLE_IOS_SIM )
	TARGET_LINK_LIBRARIES(${TARGET_NAME} ${OPENGL_LIBRARIES})
	SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES FOLDER "${FOLDERNAME}")

	MESSAGE("[X] ${TARGET_NAME}")
ELSE()
	MESSAGE("[ ] ${TARGET_NAME}")
ENDIF()
